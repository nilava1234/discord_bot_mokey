name: Deploy Mokey

on:
  push:
    branches:
      - main

jobs:
  deploy:
    runs-on: self-hosted

    steps:
    - name: kill current run
      run: |
        pkill -f /home/nil/Projects/discord_bot_mokey/run.sh || true
    
    - name: pull code
      run: | 
        cd /home/nil/Projects/discord_bot_mokey
        git pull

    - name: run script
      run: |
        nohup bash /home/nil/Projects/discord_bot_mokey/run.sh &